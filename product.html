<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Page</title>
</head>

<body>

    <form id="productForm">
        <label for="token">Bearer Token:</label>
        <input type="text" id="token" name="token" required>

        <button type="button" onclick="getProducts()">Get Products</button>
    </form>

    <div id="productResponseDiv"></div>

    <script>
        function getProducts() {
            var token = document.getElementById('token').value;
    
            fetch('http://localhost:8080/product', {
                method: 'GET',
                headers: {
                    'Authorization': 'Bearer ' + token
                },
                mode: 'cors'
            })
            .then(response => response.json())
            .then(data => {
                console.log(data);
    
                // Display the response in the div
                var responseDiv = document.getElementById('productResponseDiv');
                responseDiv.innerHTML = `
                    <p>Products:</p>
                    <ul>
                        ${data.map(product => `
                            <li>
                                <strong>Name:</strong> ${product.name}<br>
                                <strong>Description:</strong> ${product.description}<br>
                                <strong>Price:</strong> ${product.price}<br>
                                <strong>Type:</strong> ${product.type}<br>
                                <strong>URL:</strong> ${product.url}
                            </li>`
                        ).join('')}
                    </ul>
                `;
            })
            .catch(error => {
                console.error('Error:', error);
    
                // Display an error message in the div
                var responseDiv = document.getElementById('productResponseDiv');
                responseDiv.innerHTML = `<p>Error: ${error.message}</p>`;
            });
        }
    </script>
    
</body>

</html>